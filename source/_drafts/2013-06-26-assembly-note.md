---
title: 汇编笔记(一)
tags:
  - assembly
permalink: assembly-note
categories:
  - Technology
date: 2013-06-26 00:00:00
---


汇编学习笔记(《汇编语言·王爽版》)
---------------------------------------------
- `bit(比特)`： 一个二进制位
- 8个bit（比特）组成一个byte(字节)，即8个二进制位
- `字(word)`：由两个字节组成，分为高位字节，低位字节（16位寄存器）
- 寄存器： AX........
- `AH`:高8位        `AL`：低8位
- 地址加法器：  物理地址=段地址X16 + 偏移地址
- 每种进制的数乘以或除以相应进制数等于该数左移或者右移一位
- `CS:IP`    段地址：偏移地址 （指向下一个指令）  `IP`:指令指针寄存器
- `DS寄存器`：存放数据的段地址
- `[...]`：表示一个内存单元（[address]），相当于偏移地址，段地址读取的是DS寄存器里的值。
- 8086CPU不支持将数据直接送入段寄存器的操作
- `PUSH 寄存器(段寄存器、内存单元)`   ；将寄存器中的数据入栈
- `POP   寄存器(段寄存器、内存单元)`  ； 用一个寄存器接收出栈的数据
- `SS:SP`  指向栈顶元素
- 栈操作是以字为单位，栈顶的变化范围最大为**0~FFFFH**

-----------------------
数据位置的表达：

1. 立即数（idata）：对于直接包含在机器指令中的数据（执行前在cpu的指令缓冲器中）
2. 寄存器：指令要处理里的数据在寄存器中，在汇编指令中给出相应的寄存器名。
3. 段地址（SA）和偏移地址（EA）：指令要处理的数据在内存中，在汇编指令中可用`[x]`的格式给出EA,SA在某个寄存器中。（`[bp]`的段地址默认在SS中，其余默认在ds中）      
      
-------------------------
       
- `[bx+idata]`:表示一个内存单元，它的偏移地址为`(bx)+idata`(bx中的数值加上idata).相类似：`[bx+si]`、`[bx+si+idata]` 
- 在8086cpu中，只有`bx`、`si`、`di`、`bp`这四个寄存器可以用在`[...]`中来进行内存单元的寻址。
- 这四个可以单个出现，或者这能以四种组合出现：**bx和si**、**bx和di**、**bp和si**、**bp和di**
- 只要在`[...]`中使用寄存器**bp**,而指令中没有显性的给出段地址，则段地址默认在**ss**中        

----------------------------
标志寄存器(flag)：CF  PF ZF SF OF DF

- ZF : 零标志位。它记录相关指令执行后，其结果是否为0，如果为0，则ZF=1，如果不为0，则ZF=0
- PF : 奇偶标志位。它记录相关指令执行后，其结果的所有bit位中**1**的个数是否为偶数，如果1的个数为偶数，PF=1;如果为奇数，PF=0
- SF : 符号标志位。它记录相关指令执行后，其结果是否为负数，如果为负，SF=1;如果非负，SF=0
- CF : 进位标志位。在进行无符号数运算的时候，它记录了运算结果的最高有效位向高位的进位值，或从更高位的借位值
- OF : 溢出标志位。一般情况下，OF记录了有符号运算的结果是否发生了溢出，如果发生了溢出，OF=1;如果没有，OF=0

**CF与OF区别**： CF是对无符号数运算有意义的标志位，而OF是对有符号运算的标志位。
------------------------------
**中断**： CPU不再接着（刚执行完的指令）向下执行，而是转去处理这个特殊的信息。       
CPU内部产生4种中断的情况:

1. 除法错误，比如执行`div`指令产生的除法溢出。**0**
2. 单步执行                               **1**
3. 执行`into`指令                         **4**
4. 执行`int`指令                          **n**

规定： 8086cpu中断向量表必须在`0000:0000~0000:03FF`单元中

端口读写 （`in`或者`out`）： 在`in`或`out`指令中，只能使用`ax`或`al`来存放从端口读入的数据或者要发送到端口的数据

`shl` 和 `shr`： 逻辑位移指令
